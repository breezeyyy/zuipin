"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,n){if(e){if("string"==typeof e)return _arrayLikeToArray(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(t="Object"===t&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,n):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,a=new Array(n);t<n;t++)a[t]=e[t];return a}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,n,t){return n&&_defineProperties(e.prototype,n),t&&_defineProperties(e,t),e}!function(){var e=function(){function e(){_classCallCheck(this,e),this.imageBoxMain=document.querySelector(".bannerImg"),this.bannerNavMain=document.querySelector(".bannerNav"),this.imageBoxTejia=document.querySelector(".tejia .specialbanner"),this.imageBoxMiaosha=document.querySelector(".miaosha .specialbanner"),this.specialTimer=document.querySelectorAll(".timer"),this.drinkBox=document.querySelector("#self .drink_content"),this.giftBox=document.querySelector("#gift .drink_content"),this.teaBox=document.querySelector("#tea .drink_content"),this.hotBox=document.querySelector(".hot .hot_content>ul"),this.newsBox=document.querySelector(".news_content"),this.getDBData("index_data")}return _createClass(e,[{key:"init",value:function(e){for(var n in e)this["renderer_".concat(n)](e[n])}},{key:"getDBData",value:function(e){var n=this;ajax({type:"GET",url:"http://localhost:3000/api",success:function(e){e.code&&n.init(e.data)},error:function(e){console.log(e)},search:{type:e}})}},{key:"renderer_banner_main",value:function(e){var n=this,t="";e.items.forEach(function(e){t+="<li><a href=",t+=e.ID?'"./details.html?goodID='.concat(e.ID,'&type=index_data&dataKey=banner_main&dataModName=items&good=true"'):"javascript:;",t+='><img src="./images/index/'.concat(e.img_main,'" alt=""></a></li>');e=document.createElement("li");e.appendChild(document.createElement("span")),n.bannerNavMain.appendChild(e)}),this.imageBoxMain.innerHTML=t,this.bannerNavMain.children[0].className="bannerOn"}},{key:"renderer_banner_tejia",value:function(e){this.specialTimer[0].setAttribute("endtime",e.endtime);var n="";e.items.forEach(function(e){n+='<li>\n                            <a href="">\n                                <div class="item_img"><img src="./images/index/'.concat(e.img,'" alt="">\n                                </div>\n                                <div class="item_desc">\n                                    <p class="item_title" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                                    <p class="item_info" title="').concat(e.info,'">').concat(e.info,'</p>\n                                    <p class="item_price"><img src="./images/index/zp_label_xsj.png" alt=""><span\n                                            class="now_price">').concat(e.newPrice,'</span><span class="old_price">').concat(e.oldPrice,'</span></p>\n                                </div>\n                                <div class="tagimg">\n                                    <img src="./images/index/time-limit.png" alt="">\n                                </div>\n                            </a>\n                        </li>')}),this.imageBoxTejia.innerHTML=n}},{key:"renderer_banner_miaosha",value:function(e){this.specialTimer[1].setAttribute("endtime",e.endtime);var n="";e.items.forEach(function(e){n+='<li>\n                            <a href="">\n                                <div class="item_img"><img src="./images/index/'.concat(e.img,'" alt="">\n                                </div>\n                                <div class="item_desc">\n                                    <p class="item_title" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                                    <p class="item_info" title="').concat(e.info,'">').concat(e.info,'</p>\n                                    <div class="meter">\n                                        <div class="meterBar">\n                                            <span class = "nowMeter"\n                                            style = "width: ').concat(parseInt(e.remainNum/e.allNum*100),'%" >\n                                            </span>\n                                        </div>\n                                        <span class="remainNum">还剩 ').concat(e.remainNum,' 件</span>\n                                    </div>\n                                    <p class="item_price"><img src="./images/index/zp_label_msj.png" alt=""><span\n                                            class="now_price"><em class="now-price-icon">￥</em>').concat(e.newPrice,'</span><span\n                                            class="old_price">').concat(e.oldPrice,'</span></p>\n                                </div>\n                                <div class="tagimg">\n                                    <img src="./images/index/zp_label_xlm.png" alt="">\n                                </div>\n                            </a>\n                        </li>')}),this.imageBoxMiaosha.innerHTML=n}},{key:"renderer_drink_data",value:function(e){var t=[],a='<div class="drink_left">\n                            <a href="" class="tag_card card_hover"><img src="./images/index/'.concat(e.left,'" alt=""></a>\n                            <a href="" class="more_card card_hover">\n                                <h2>自饮助手</h2>\n                                <p class="more_text">自己喝的茶</p>\n                                <p class="more_text">包装不用太复杂</p>\n                                <img src="./images/index/more.png" alt="">\n                            </a>\n                        </div>\n                        <div class="drink_center">');e.center.forEach(function(e,n){a+='<a href="" target="_blank" class="card_hover">',t.includes(n+1)&&(a+='<div class="tag_img">\n                                                        <img src="./images/index/2021-03-22_1616395321.png">\n                                                    </div>'),a+='<div class="item_img"><img src="./images/index/'.concat(e.img,'"></div>\n                            <p class="item_img_desc" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                            <p class="item_img_info" title="').concat(e.info,'">').concat(e.info,'</p>\n                            <p class="item_price">').concat(e.price,"</p>\n                        </a>")}),a+='</div>\n                    <div class="drink_right">\n                        <div class="news_list">\n                            <span class="news_head">自饮锦囊</span>\n                            <div class="news_content">',e.right.forEach(function(e){a+='<a href="" target="_blank" class="news_item">\n                                <p class="news_title" title="'.concat(e.title,'">').concat(e.title,'</p>\n                                <div class="news_artical clearfix">\n                                    <img src="./images/index/').concat(e.img,'">\n                                    <p title="').concat(e.desc,'">').concat(e.desc,"</p>\n                                </div>\n                            </a>")}),this.drinkBox.innerHTML=a+='</div>\n                                            </div>\n                                            <a href="" class="more_card card_hover">\n                                                <h2>浏览更多</h2>\n                                                <p class="more_text">想要喝茶，不知如何选</p>\n                                                <p class="more_text">这里有一只锦囊！</p>\n                                                <img src="./images/index/more.png" alt="">\n                                            </a>\n                                        </div>'}},{key:"renderer_gift_data",value:function(e){var n='<div class="drink_left">\n                    <a href="" class="tag_card card_hover"><img src="./images/index/'.concat(e.left,'" alt=""></a>\n                    <a href="" class="more_card card_hover">\n                        <h2>送礼助手</h2>\n                        <p class="more_text">为您用心推荐每一份礼物</p>\n                        <img src="./images/index/more.png" alt="">\n                    </a>\n                </div>\n                <div class="drink_center">');e.center.forEach(function(e){n+='<a href="" target="_blank" class="card_hover">',e.new&&(n+='<div class="tag_img">\n                                                        <img src="./images/index/2021-03-22_1616395321.png">\n                                                    </div>'),n+='<div class="item_img"><img src="./images/index/'.concat(e.img,'"></div>\n                            <p class="item_img_desc" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                            <p class="item_img_info" title="').concat(e.info,'">').concat(e.info,'</p>\n                            <p class="item_price">').concat(e.price,"</p>\n                        </a>")}),n+='</div>\n                    <div class="drink_right">\n                        <div class="news_list">\n                            <span class="news_head">自饮锦囊</span>\n                            <div class="news_content">',e.right.forEach(function(e){n+='<a href="" target="_blank" class="news_item">\n                                <p class="news_title" title="'.concat(e.title,'">').concat(e.title,'</p>\n                                <div class="news_artical clearfix">\n                                    <img src="./images/index/').concat(e.img,'">\n                                    <p title="').concat(e.desc,'">').concat(e.desc,"</p>\n                                </div>\n                            </a>")}),this.giftBox.innerHTML=n+='</div>\n                                            </div>\n                                            <a href="" class="more_card card_hover">\n                                                <h2>浏览更多</h2>\n                                                <p class="more_text">想要喝茶，不知如何选</p>\n                                                <p class="more_text">这里有一只锦囊！</p>\n                                                <img src="./images/index/more.png" alt="">\n                                            </a>\n                                        </div>'}},{key:"renderer_tea_data",value:function(e){var t='<div class="drink_left">';e.left.forEach(function(e){t+='<a href="" class="tag_card card_hover"><img src="./images/index/'.concat(e,'" alt=""></a>')}),t+='</div>\n                    <div class="drink_center">',e.center.forEach(function(e,n){t+='<a href="" target="_blank" class="card_hover">',e.new&&(t+='<div class="tag_img">\n                                                        <img src="./images/index/2021-03-22_1616395321.png">\n                                                    </div>'),t+='<div class="item_img"><img src="./images/index/'.concat(e.img,'"></div>\n                            <p class="item_img_desc" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                            <p class="item_img_info" title="').concat(e.info,'">').concat(e.info,'</p>\n                            <p class="item_price">').concat(e.price,"</p>\n                        </a>")}),this.teaBox.innerHTML=t+='<div class="add_item">\n                                                <a href="" target="_blank" class="samll_box card_hover">\n                                                    <p class="samll_box_text" title="'.concat(e.right.desc,'">').concat(e.right.desc,'</p>\n                                                    <p class="samll_box_price">').concat(e.right.price,'</p>\n                                                    <img src="./images/index/').concat(e.right.img,'">\n                                                </a>\n                                                <a href="" target="_blank" class="more_card card_hover">\n                                                    <h2>浏览更多</h2>\n                                                    <p class="more_text">茶道配件</p>\n                                                    <img src="./images/index/more.png" alt="查看更多">\n                                                </a>\n                                            </div>\n                                        </div>')}},{key:"renderer_banner_hot",value:function(e){var n="";e.items.forEach(function(e){n+='<li>\n                            <a href="" target="_blank" class="hot_box">\n                                <div class="hot_img">\n                                    <img src="./images/index/'.concat(e.img,'">\n                                </div>\n                                <p class="hot_text" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                                <p class="hot_people" title="来自').concat(e.userName,'的评价">来自').concat(e.userName,'的评价</p>\n                                <p class="hot_descr clearfix">\n                                    <span title="').concat(e.info,'">').concat(e.info,"</span>\n                                    <span></span>\n                                    <span>").concat(e.price,"</span>\n                                </p>\n                            </a>\n                        </li>")}),this.hotBox.innerHTML=n}},{key:"renderer_news_data",value:function(e){var n="";e.data.forEach(function(e){n+='<a class="card_hover">\n                            <div class="news_img">\n                                <img src="./images/index/'.concat(e.img,'">\n                            </div>\n                            <p class="news_text" title="').concat(e.desc,'">').concat(e.desc,'</p>\n                            <p class="news_desc" title="').concat(e.info,'">').concat(e.info,"</p>\n                        </a>")}),this.newsBox.innerHTML=n}}]),e}(),n=function(){function e(){_classCallCheck(this,e),this.nav=document.querySelector(".floor_nav"),this.tejia=document.querySelector(".itemSpecial"),this.drink=document.querySelector("#self"),this.gift=document.querySelector("#gift"),this.tea=document.querySelector("#tea"),this.hot=document.querySelector(".hot"),this.news=document.querySelector(".news"),this.topValue=[4e3,3500,2700,2e3,1200,700],this.topTo=_toConsumableArray(this.topValue).reverse(),this.judgeStatus(),this.navScrollEvent()}return _createClass(e,[{key:"navClickEvent",value:function(){var t=this;this.li.forEach(function(e,n){e.onclick=function(){t.removeScrollEvent(),t.clearClassName(),t.li[n].className="on",elementAnimation(document.documentElement,{scrollTop:t.topTo[n]},t.navScrollEvent.bind(t))}})}},{key:"navScrollEvent",value:function(){var e=this;document.onscroll=function(){e.judgeStatus()}}},{key:"removeScrollEvent",value:function(){document.onscroll=null}},{key:"clearClassName",value:function(){this.li.forEach(function(e){e.className=""})}},{key:"judgeStatus",value:function(){700<=document.documentElement.scrollTop?this.show():this.hide()}},{key:"changeNav",value:function(){var e=Math.abs(this.topValue.findIndex(function(e){return document.documentElement.scrollTop>=e})-this.li.length+1)%this.li.length;this.li[e].className="on"}},{key:"show",value:function(){var e=this;this.nav.style.display="block",this.setDelay(function(){e.nav.style.opacity="1"},20),this.li=document.querySelectorAll(".floor_nav li"),this.navClickEvent(),this.clearClassName(),this.changeNav()}},{key:"hide",value:function(){var e=this;this.nav.style.opacity="0",this.setDelay(function(){e.nav.style.display="none"},400)}},{key:"setDelay",value:function(e,n){clearTimeout(this.timeOutIndex),this.timeOutIndex=setTimeout(e,n)}}]),e}();new e,setTimeout(function(){document.querySelector(".selectTea").style.display="block",document.querySelector(".good-item").style.display="block",new n,window.createTimeDown(),window.createSuspension(document.querySelector(".suspension"),500),window.createBannerMain({imgList:document.querySelectorAll(".bannerImg li"),btns:document.querySelectorAll(".bannerNav li")}),window.createBannerMultiEle({imgBox:document.querySelector(".tejia .specialbanner"),btns:document.querySelectorAll(".tejia .specialBtns div"),together:2}),window.createBannerMultiEle({imgBox:document.querySelector(".miaosha .specialbanner"),btns:document.querySelectorAll(".miaosha .specialBtns div"),together:2}),window.createBannerMultiEle({imgBox:document.querySelector(".hot_content ul"),btns:document.querySelectorAll(".hot_btns div"),together:4})},300)}();