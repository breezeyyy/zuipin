"use strict";require.config({baseUrl:"./modules/personal",paths:{jls:"judgeLoginStatus",cp:"changePsd"}}),require(["jls","cp"],function(u,l){document.querySelector(".header-bottom").className+=" hide",setTimeout(function(){var n={url:"http://localhost:3000/api",menuCont:document.querySelectorAll(".menuCont"),menu:document.querySelectorAll(".menuMod ul li a"),pageIndex:0,oldPsd:document.querySelector("#oldPsd"),newPsd:document.querySelector("#newPsd"),repeatPsd:document.querySelector("#repeatPsd"),submit:document.querySelector(".alterPsd button"),errorInfo:document.querySelectorAll(".alterPsd p"),loginout:document.querySelector(".loginout"),btnFlags:!1,psdReg:/^.{6,16}$/};function t(e,t){n.errorInfo[e].innerHTML=["您输入的两次密码不一致","您输入的密码格式有误，密码长度为6-16位","旧密码错误","新密码不能和旧密码相同"][t]}function e(e){n.errorInfo[e].innerHTML=""}n.menu.forEach(function(e,t){addEvent(e,"click",function(){n.menu[n.pageIndex].className="",n.menuCont[n.pageIndex].style.display="none",n.pageIndex=t,n.menuCont[n.pageIndex].style.display="block",this.className="active"})}),addEvent(n.oldPsd,"input",function(){!this.value||n.psdReg.test(this.value)?e(0):t(0,1),u(n)}),addEvent(n.newPsd,"input",function(){this.value?n.psdReg.test(this.value)?n.oldPsd.value!==this.value&&n.oldPsd.value?n.repeatPsd.value!==this.value&&n.repeatPsd.value?t(1,0):(e(1),e(2)):t(1,3):t(1,1):e(1),u(n)}),addEvent(n.repeatPsd,"input",function(){this.value?n.psdReg.test(this.value)?n.newPsd.value!==this.value&&n.newPsd.value?t(2,0):(e(2),e(1)):t(2,1):e(2),u(n)}),addEvent(n.submit,"click",function(){n.btnFlags&&l({oldP:n.oldPsd.value,newP:n.newPsd.value,url:n.url,success:function(e){e.code?(t(0,2),n.oldPsd.focus()):(alert("密码修改成功，即将重新登陆"),n.loginout.click())}})})},50)});